import React from 'react'
import { useDispatch, useSelector } from 'react-redux'
import styled from 'styled-components'
import { setDrawer } from '../store/reducers/drawer'
import { setSearchValue } from '../store/reducers/search'

const StyledSearchBlock = styled('div')`
  & {
      position: relative;
      width: 100%;
      height: 44px;
      display: flex;
      align-items: center; 
      margin-bottom: 12px;
  }
`

const StyledIconContainer = styled('div')`
  & {
    position: absolute;
    top: 13px;
    left: 16px;
  }
`

export const DefaultInput = styled('input')`
  & {
      width: ${props => props.width || ''};
      border-radius: 8px;
      font-size: 14px;
      border: ${props => props.border || ''};
      background-color: ${props => props.bc || ''};
      outline: none;
      transition: all 0.3s;
  }

  &:focus {
    border: 1px solid var(--tg-theme-link-color);
    background-color: transparent;
  }
`

const StyledInput = styled(DefaultInput)`
  & {
    padding: 0 36px 0 48px;
    height: 100%;
    width: 100%;
  }

  &::placeholder {
    color: var(--tg-theme-hint-color);
    font-size: 14px;
    font-family: 'Manrope', sans-serif;
  }
`

const StyledButton = styled('button')`
  & {
    position: absolute;
    border: none;
    background-color: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    top: 14px;
    right: 12px;
    cursor: pointer;
  }
`

export const SearchBlock = () => {
  const dispatch = useDispatch()
  const value = useSelector(state => state.search.value)
  return (
    <StyledSearchBlock>
      <StyledIconContainer>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M15.8046 14.862L11.8253 10.8827C12.9097 9.5564 13.4429 7.86406 13.3145 6.15571C13.1862 4.44735 12.4061 2.85369 11.1357 1.70435C9.86528 0.555007 8.2017 -0.0620722 6.48907 -0.019251C4.77644 0.0235702 3.14578 0.723015 1.93439 1.93441C0.722992 3.1458 0.0235473 4.77646 -0.0192739 6.48909C-0.0620951 8.20173 0.554984 9.8653 1.70432 11.1357C2.85366 12.4061 4.44733 13.1862 6.15568 13.3146C7.86404 13.4429 9.55637 12.9097 10.8826 11.8253L14.862 15.8047C14.9877 15.9261 15.1561 15.9933 15.3309 15.9918C15.5057 15.9903 15.6729 15.9202 15.7965 15.7965C15.9201 15.6729 15.9902 15.5057 15.9918 15.3309C15.9933 15.1561 15.9261 14.9877 15.8046 14.862ZM6.66664 12C5.61181 12 4.58066 11.6872 3.7036 11.1012C2.82654 10.5151 2.14295 9.68218 1.73929 8.70764C1.33562 7.73311 1.23 6.66075 1.43579 5.62618C1.64158 4.59162 2.14953 3.64131 2.89541 2.89543C3.64129 2.14955 4.5916 1.6416 5.62616 1.43581C6.66073 1.23002 7.73308 1.33564 8.70762 1.73931C9.68216 2.14298 10.5151 2.82656 11.1011 3.70362C11.6872 4.58069 12 5.61183 12 6.66667C11.9984 8.08067 11.436 9.4363 10.4361 10.4361C9.43628 11.436 8.08064 11.9984 6.66664 12Z" fill="var(--tg-theme-hint-color)" />
        </svg>
      </StyledIconContainer>
      <StyledInput
        placeholder='Поиск по названию'
        bc={'var(--tg-theme-bg-color)'}
        border={'1px solid var(--tg-theme-bg-color)'}
        onChange={(e) => dispatch(setSearchValue(e.target.value))}
        value={value}

      />
      <StyledButton
        onClick={() => dispatch(setDrawer(true))}
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <g clipPath="url(#clip0_47_2)">
            <path d="M0.666667 3.16666H2.49067C2.63376 3.69314 2.94612 4.15792 3.37955 4.48928C3.81299 4.82063 4.34341 5.00016 4.889 5.00016C5.43459 5.00016 5.96501 4.82063 6.39845 4.48928C6.83188 4.15792 7.14424 3.69314 7.28733 3.16666H15.3333C15.5101 3.16666 15.6797 3.09642 15.8047 2.97139C15.9298 2.84637 16 2.6768 16 2.49999C16 2.32318 15.9298 2.15361 15.8047 2.02859C15.6797 1.90356 15.5101 1.83332 15.3333 1.83332H7.28733C7.14424 1.30684 6.83188 0.84206 6.39845 0.510702C5.96501 0.179344 5.43459 -0.000183105 4.889 -0.000183105C4.34341 -0.000183105 3.81299 0.179344 3.37955 0.510702C2.94612 0.84206 2.63376 1.30684 2.49067 1.83332H0.666667C0.489856 1.83332 0.320286 1.90356 0.195262 2.02859C0.0702379 2.15361 0 2.32318 0 2.49999C0 2.6768 0.0702379 2.84637 0.195262 2.97139C0.320286 3.09642 0.489856 3.16666 0.666667 3.16666ZM4.88867 1.33332C5.11941 1.33332 5.34497 1.40175 5.53683 1.52994C5.72869 1.65814 5.87822 1.84035 5.96653 2.05353C6.05483 2.26671 6.07793 2.50128 6.03292 2.7276C5.9879 2.95391 5.87679 3.16179 5.71362 3.32495C5.55046 3.48811 5.34258 3.59922 5.11627 3.64424C4.88996 3.68926 4.65538 3.66615 4.4422 3.57785C4.22902 3.48955 4.04681 3.34001 3.91862 3.14815C3.79042 2.9563 3.722 2.73073 3.722 2.49999C3.72235 2.19068 3.84538 1.89414 4.0641 1.67542C4.28281 1.45671 4.57936 1.33368 4.88867 1.33332Z" fill="var(--tg-theme-hint-color)" />
            <path d="M15.3333 7.33333H13.5093C13.3665 6.80672 13.0542 6.34178 12.6208 6.01028C12.1874 5.67879 11.657 5.49918 11.1113 5.49918C10.5657 5.49918 10.0352 5.67879 9.60182 6.01028C9.16842 6.34178 8.85619 6.80672 8.71333 7.33333H0.666667C0.489856 7.33333 0.320286 7.40357 0.195262 7.52859C0.0702379 7.65362 0 7.82319 0 8C0 8.17681 0.0702379 8.34638 0.195262 8.4714C0.320286 8.59643 0.489856 8.66667 0.666667 8.66667H8.71333C8.85619 9.19328 9.16842 9.65822 9.60182 9.98971C10.0352 10.3212 10.5657 10.5008 11.1113 10.5008C11.657 10.5008 12.1874 10.3212 12.6208 9.98971C13.0542 9.65822 13.3665 9.19328 13.5093 8.66667H15.3333C15.5101 8.66667 15.6797 8.59643 15.8047 8.4714C15.9298 8.34638 16 8.17681 16 8C16 7.82319 15.9298 7.65362 15.8047 7.52859C15.6797 7.40357 15.5101 7.33333 15.3333 7.33333ZM11.1113 9.16667C10.8806 9.16667 10.655 9.09824 10.4632 8.97005C10.2713 8.84185 10.1218 8.65964 10.0335 8.44646C9.94517 8.23328 9.92207 7.9987 9.96708 7.77239C10.0121 7.54608 10.1232 7.3382 10.2864 7.17504C10.4495 7.01188 10.6574 6.90077 10.8837 6.85575C11.11 6.81073 11.3446 6.83384 11.5578 6.92214C11.771 7.01044 11.9532 7.15998 12.0814 7.35183C12.2096 7.54369 12.278 7.76925 12.278 8C12.2776 8.30931 12.1546 8.60585 11.9359 8.82457C11.7172 9.04328 11.4206 9.16631 11.1113 9.16667Z" fill="var(--tg-theme-hint-color)" />
            <path d="M15.3333 12.8333H7.28733C7.14424 12.3068 6.83188 11.8421 6.39845 11.5107C5.96501 11.1793 5.43459 10.9998 4.889 10.9998C4.34341 10.9998 3.81299 11.1793 3.37955 11.5107C2.94612 11.8421 2.63376 12.3068 2.49067 12.8333H0.666667C0.489856 12.8333 0.320286 12.9036 0.195262 13.0286C0.0702379 13.1536 0 13.3232 0 13.5C0 13.6768 0.0702379 13.8464 0.195262 13.9714C0.320286 14.0964 0.489856 14.1667 0.666667 14.1667H2.49067C2.63376 14.6931 2.94612 15.1579 3.37955 15.4893C3.81299 15.8206 4.34341 16.0002 4.889 16.0002C5.43459 16.0002 5.96501 15.8206 6.39845 15.4893C6.83188 15.1579 7.14424 14.6931 7.28733 14.1667H15.3333C15.5101 14.1667 15.6797 14.0964 15.8047 13.9714C15.9298 13.8464 16 13.6768 16 13.5C16 13.3232 15.9298 13.1536 15.8047 13.0286C15.6797 12.9036 15.5101 12.8333 15.3333 12.8333ZM4.88867 14.6667C4.65792 14.6667 4.43236 14.5982 4.2405 14.47C4.04864 14.3418 3.89911 14.1596 3.81081 13.9465C3.72251 13.7333 3.6994 13.4987 3.74442 13.2724C3.78943 13.0461 3.90055 12.8382 4.06371 12.675C4.22687 12.5119 4.43475 12.4008 4.66106 12.3557C4.88737 12.3107 5.12195 12.3338 5.33513 12.4221C5.54831 12.5104 5.73052 12.66 5.85871 12.8518C5.98691 13.0437 6.05533 13.2692 6.05533 13.5C6.0548 13.8092 5.93172 14.1057 5.71304 14.3244C5.49436 14.543 5.19792 14.6661 4.88867 14.6667Z" fill="var(--tg-theme-hint-color)" />
          </g>
          <defs>
            <clipPath id="clip0_47_2">
              <rect width="16" height="16" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </StyledButton>
    </StyledSearchBlock>
  )
}
